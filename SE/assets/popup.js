class PromoPopup extends HTMLElement{constructor(){super(),"/challenge"!==window.location.pathname&&(this.cookieName="beyours:promo-popup",this.classes={bodyClass:"promo-popup--open",activeClass:"is-active",closingClass:"is-closing",showImage:"show-image"},this.popup=this.querySelector(".promo-popup"),this.querySelector(".form__message")&&this.open(),this.querySelectorAll(".popup-close, .popup-overlay").forEach(s=>{s.addEventListener("click",this.close.bind(this))}),this.querySelectorAll(".popup-open").forEach(s=>{s.addEventListener("click",this.open.bind(this))}),this.getCookie(this.cookieName)&&"true"!==this.dataset.testMode||this.init(),Shopify.designMode)&&(document.addEventListener("shopify:section:load",s=>filterShopifyEvent(s,this,()=>this.open.bind(this))),document.addEventListener("shopify:section:select",s=>filterShopifyEvent(s,this,this.open.bind(this))),document.addEventListener("shopify:section:deselect",s=>filterShopifyEvent(s,this,this.close.bind(this))))}init(){Shopify&&Shopify.designMode||setTimeout(function(){this.open()}.bind(this),1e3*parseInt(this.dataset.delay))}open(){document.body.classList.remove(this.classes.bodyClass),this.popup.classList.add(this.classes.activeClass),setTimeout(()=>{this.popup.classList.add(this.classes.showImage)},600),"center"===this.dataset.position&&(setScrollbarWidth(),document.body.classList.add(this.classes.bodyClass))}close(){this.popup.classList.add(this.classes.closingClass),setTimeout(()=>{this.popup.classList.remove(this.classes.activeClass),this.popup.classList.remove(this.classes.closingClass),this.popup.classList.remove(this.classes.showImage),"center"===this.dataset.position&&document.body.classList.remove(this.classes.bodyClass)},500),"true"===this.dataset.testMode?this.removeCookie(this.cookieName):this.setCookie(this.cookieName,this.dataset.expiry)}getCookie(s){s=document.cookie.match(`(^|;)\\s*${s}\\s*=\\s*([^;]+)`);return s?s[2]:null}setCookie(s,e){document.cookie=s+`=true; max-age=${24*e*60*60}; path=/`}removeCookie(s){document.cookie=s+"=; max-age=0"}}customElements.define("promo-popup",PromoPopup);