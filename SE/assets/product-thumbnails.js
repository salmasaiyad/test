customElements.get("product-thumbnails")||customElements.define("product-thumbnails",class extends HTMLElement{constructor(){super(),this.mql=window.matchMedia("(min-width: 750px)"),this.querySelectorAll(".product__thumbnail").forEach(t=>t.addEventListener("click",this.onButtonClick.bind(this))),this.mql.matches&&(this.handleScrollSpy(),this.addEventListener("scrollspy:changed",this.onScrollTargetChanged.bind(this)))}onButtonClick(t){var t=t.target;const e=document.querySelector(`[data-media-id="${t.dataset.section}-${t.dataset.mediaId}"]`);e&&(this.stickyHeader=this.stickyHeader||document.querySelector("sticky-header"),this.stickyHeader&&this.stickyHeader.dispatchEvent(new Event("preventHeaderReveal")),window.setTimeout(()=>{e.scrollIntoView({behavior:"smooth"})}),t=e.querySelector("#Deferred-Poster-"+t.dataset.mediaId))&&t.click()}handleScrollSpy(){const i=new IntersectionObserver((t=>{const e=this.indicesInViewPort[0]||0;t.forEach(t=>{this.updateIndicesInViewPort(t,e)}),this.indicesInViewPort=this.indicesInViewPort.filter(function(t,e,i){return i.indexOf(t)===e}),0!==this.indicesInViewPort.length&&e!==this.indicesInViewPort[0]&&(t=new CustomEvent("scrollspy:changed",{detail:{newTarget:this.targets[this.indicesInViewPort[0]],oldTarget:this.targets[e]}}),this.dispatchEvent(t))}).bind(this),{rootMargin:"-50px 0px"});this.targets=[],this.targetIndices={},this.indicesInViewPort=[],document.querySelectorAll('[id^="Slider-Gallery"] .product__media-item').forEach((t,e)=>{this.targets.push(t),this.targetIndices[t.id]=e,i.observe(t)})}updateIndicesInViewPort(t,e){var i=this.targetIndices[t.target.id];0===t.intersectionRatio?-1!==(t=this.indicesInViewPort.indexOf(i))&&this.indicesInViewPort.splice(t,1):i<e?this.indicesInViewPort.unshift(i):i>this.indicesInViewPort[this.indicesInViewPort.length-1]?this.indicesInViewPort.push(i):(this.indicesInViewPort.push(i),this.indicesInViewPort.sort())}onScrollTargetChanged(t){var e=this.querySelectorAll(".product__thumbnail"),t=this.querySelector('.product__thumbnail[data-thumbnail-position="'+t.detail.newTarget.getAttribute("data-media-position")+'"]');e.forEach(function(t){return t.classList.remove("is-active")}),t.classList.add("is-active")}});