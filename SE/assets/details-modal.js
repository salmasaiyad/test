class DetailsModal extends HTMLElement{constructor(){super(),this.detailsContainer=this.querySelector("details"),this.summaryToggle=this.querySelector("summary"),this.detailsContainer.addEventListener("keyup",t=>t.code&&"ESCAPE"===t.code.toUpperCase()&&this.close()),this.summaryToggle.addEventListener("click",this.onSummaryClick.bind(this)),this.querySelector('button[type="button"]').addEventListener("click",this.close.bind(this)),this.summaryToggle.setAttribute("role","button")}onSummaryClick(t){t.preventDefault(),t.target.closest("details").hasAttribute("open")?this.close():this.open(t)}onBodyClick(t){this.contains(t.target)&&!t.target.classList.contains("modal-overlay")||this.close(!1)}open(){setScrollbarWidth(),setTimeout(()=>{this.detailsContainer.classList.add("modal-opening")}),this.detailsContainer.setAttribute("open",""),this.onBodyClickEvent=this.onBodyClickEvent||this.onBodyClick.bind(this),document.body.addEventListener("click",this.onBodyClickEvent),document.body.classList.add("details-modal--open"),this.openAnimation()}openAnimation(){let e;const i=t=>{t-(e=void 0===e?t:e)<400?window.requestAnimationFrame(i):trapFocus(this.detailsContainer.querySelector('[tabindex="-1"]'),this.detailsContainer.querySelector('input:not([type="hidden"])'))};window.requestAnimationFrame(i)}close(t=!0){removeTrapFocus(t?this.summaryToggle:null),this.detailsContainer.classList.remove("modal-opening"),document.body.removeEventListener("click",this.onBodyClickEvent),document.body.classList.remove("details-modal--open"),document.body.classList.add("details-modal--closing"),this.closeAnimation()}closeAnimation(){let e;const i=t=>{t-(e=void 0===e?t:e)<400?window.requestAnimationFrame(i):(this.detailsContainer.removeAttribute("open"),document.body.classList.remove("details-modal--closing"))};window.requestAnimationFrame(i)}}customElements.define("details-modal",DetailsModal);